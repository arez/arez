language: ruby
jdk:
  - oraclejdk8
sudo: false
rvm:
  - 2.3.1
node_js:
  - v6.10.3
before_install:
  # This is based on the instructions at https://gist.github.com/domenic/ec8b0fc8ab45f39403dd
  - openssl aes-256-cbc -K $encrypted_90b1dba0abf8_key -iv $encrypted_90b1dba0abf8_iv -in etc/deploy_id_rsa.enc -out ../deploy_id_rsa -d
  - chmod 600 ../deploy_id_rsa
  - eval `ssh-agent -s` && ssh-add ../deploy_id_rsa
install:
  - nvm install v6.10.3
  - nvm use v6.10.3
  - npm install -g yarn
  - yarn install
  - rvm use 2.3.1
  - gem install bundler
  - bundle install
script: buildr clean site:deploy package publish_if_tagged
git:
  depth: 10
env:
  global:
    - MAVEN_CENTRAL_USERNAME=realityforge
    - secure: "dmiEkaGKQzoY5cX4N99FcYqPf3c9Yx5QqWS7OVXFN9b71iWa2R1f8ybGxLQFWlsvLLWi33PmLT3rk3q1V1132C4xgdn6tlh15lwzAXoQ10EbFRJ2vhwT2xFdPTY9cXuDUH2HN2arMCNHTVx5U8PkvLtuqv5ZEYK1oPVi3+J8oP83EdLl+QBv6I7Ai2b+7w627w/2EVHdnSkT2kDH91IPRpJfGtZZaX5d8MwxXwmWTqkwrx3yh/oKFPcFisoZCrlUe+AWcKCSgGxPdn7ow4Hi1yLfinFQ+lJaq75WswXeVNR6BueGY4PQu2wIc+sVdntrH10/63qYj2vgxw9QcY0t9RRwvlAV/LE6Xr0KXaHnloS6GYvrYofQvuqp+S2OznkvJK3bOsoUkDO1NmhlTbSsBJ7+98X3aHikz0ionEtzeWsNU8Yq12b4hulLAMRprsMIcHGDJupkev/imnynhSmPzgj+H6lfw1HjmACmT0ZNepGZgMB57Ml7XBFplb6X+Dizne9hxZMagZwzSsTa74Ut/CyW42lt4DS0i3xdXNhK39O+PArMlM70Z4sar96QI42mAl7B/wkkJQWWbdFItzuJ0+FvKY1G7T5FmaUiMhD2Aop/fynpvFQ/Fl2lYQyRctwhPLcIaxo2vz86co56HlDVmi2pwk5u7vTjGZ0CK4XIaAo="
