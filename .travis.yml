language: ruby
jdk:
  - oraclejdk8
sudo: false
rvm:
  - 2.3.1
node_js:
  - v6.10.3
before_install:
  - openssl aes-256-cbc -K $encrypted_90b1dba0abf8_key -iv $encrypted_90b1dba0abf8_iv -in etc/secrets -out ../secrets.tar -d
  - (cd ../ && tar xvf secrets.tar)
  - chmod 600 ../deploy
  - eval `ssh-agent -s` && ssh-add ../deploy
  - chmod 600 ../release.asc
  - gpg --import ../release.asc
install:
  - nvm install v6.10.3
  - nvm use v6.10.3
  - npm install -g yarn
  - yarn install
  - rvm use 2.3.1
  - gem install bundler
  - bundle install
script: buildr clean package jacoco:report site:deploy error_codes:check_duplicates publish_if_tagged
after_success:
  - bash <(curl -s https://codecov.io/bash)
git:
  depth: false
env:
  global:
    - MAVEN_CENTRAL_USERNAME=realityforge
    - secure: "SAIdBpsHIyq8Xq63u9mLMYUTrS8owqB7SD271eKYqNuK9g7WUxgpDLTgS1+GY9d4zZyke5apHiEwbXqd57uOQaPHU9c8gsGndCCqCOo66SWRnXSR/wHXTSgr9AXcD/G787mQQClp52zWuga2BdEfuMHWG7K9Q3zLfs8gzpViXDOjM7N6/kOtvTpFzUfGJfhX2XZ3c8gKUDwTu5+qeJ1CmYxGPOPjS154UA02G21LdJQwGD5C5ZpaCul3wtnrIh9pgZmosFtVpZRV/VF+QR+/hcaoQqQ8MPcfCIrcN7/+HVMJhmAXM6CC/5WupBl9urcMRTEtFHBd5pkzPvy4YfLOnLi5EsfgyGwMPoNIIKQju2paOZvVemu/M+igha4ORz8HqOoxRMSxKO0Ipq5yXCFtDPjODe+DPJuuJ4K+eudoEnUSqS1X0Dek0+5j3lB0ppioyxlbjLiXL9wC5F6RhzENButQep11qBsL/MewGGjtY1dP+eF9WqatR8TVr0iQL16nRyp8c8HG827z5H73qR4EY96APF1PirISqn/xjtkA2gy2Le7pug2CczCNGY7QjP96iObrKjHsL/rjghns9u1R3tvlfNep1a/xq+MWjCyNPX9mI3mDHsOzmsyf0fgBxp8wNFxwgkGwKQTRtYYJFeJR+DpMs3WrOzqJ/jm2H5ZM6kc="
    - secure: "bIE0jqZRCFwC0LjHF6TEaEQRzPFP3K2Yg+bS3mL738jxwQ8BgR+MAyJAMM+cOAHxx9zbj1Z3nixFMegBIdf3WGolTYsz7YuOdvBTWuLDAQqd9A6VWHfCUQ2l+PJiBPXM9xXveixbVpoBbF5Urf5WMbtQDO4EFz4tPLtViPRY8mxImWtHghJx4Qa9WWwvO9uSENbqIwr51ux/WWXRLgTWDaP/gngBOKmAUDTfjybm45HdROuHrrFe3Da8JC/PM0vGvN3KYC9ftYtUaBntMEJMLTZYun3SUQVtbj0YX+G43uajyiV6G7OFwjqQmeKg6+tSbFPYUn887v1B162fknRwHyI5EvaB7gu8kBg0y0HdV7EpGCNxejerItsa4QHj8wA0lAL3fO0e4h4rAfkt103NFq8qHK7XTD+UEzFWbqZrZlxjxUb8T0m2xrwT7oxS8Wruy100oDcEeQ8JVGFtNCU4k11P1RO3bPBNYO8De8i577qWWsWDF2qblG1oWYiQl3g3O0VepPwKn4myeab0evXHcEScneIypBIZBDpnr2Jn+2OrxeP5ba5EAPmMNS3CxIf5VXm7RcoBjMzZPlm0haq1H5BSOZ9BKUvCJee24sRTBCYNwoV/jD2fYCfoJ6qTHJPNhTD9p3pg2u5GJFMi5wdS7aB2Su4tNr9NYsHUaZoH2tc="
    - secure: "h0LOaBQEuvzU5UqJNaRielFy9hUzn9QHMABZqrZj2/T//MHfYwT4ZflS2pmmLPPEXV5lfJsLf82wM76pBM0v6pE9YzgNwHyo/WqpiNLujCWurcYQWKoxhQCgOr7O48pr+go/EShAWOCIijrDBVqhLjkV9bgLdsccEDS3VaM07+2qyPky1xmT+1dr5qnbTEn7IzWF0QJKxBTUuqitUxiLADfvI2ql1Z8KsbasGtpQNJYc40DiRQX2ckmpL8GD7KkxwRNxJn4oZlKYv0bnffo7VoRvePtuYwuCS0mnItVFFfUa3Z/wzW8XIeEVgbb1+DSfVjZpPBOCJ9q1QOMdbRi3IX9YkEcKuhS6EwoRthr4QNgFBAtHA5/uhFtAjGLVfBKdPbO2woDb65s+D7sekZG2B5Ojn9YxqNKvbVeNH6oACoZbk55fCRehEyXw2FmNhzijxKMTDJVbw4ZSk6hhOSBvoRLZrm2dIfOmzqYOSyqb2Bl8/bjRovEPgb7/y4mIrbfYeXMulNz7bPcJUGNGccPFlVqiYAig6v6Jeef8C3b/orEYVI08oaUcOxyr6+9C/f7jHvCUzo0VT3MmFuyc08kr3V4PS6TsyzfI6NCA47W7XQkrpAFowH78l2oCHAKnGbiz6yfgxg9NbDbhZ9HKdoSSofKuxPhga5YB91HB1D/QKV0="
